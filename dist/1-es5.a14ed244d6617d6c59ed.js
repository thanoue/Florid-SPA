!function(){function e(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&t(e,r)}function t(e,r){return(t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,r)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=o(e);if(t){var a=o(this).constructor;r=Reflect.construct(i,arguments,a)}else r=i.apply(this,arguments);return n(this,r)}}function n(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+XmF":function(e,t,r){"use strict";r.d(t,"e",(function(){return l})),r.d(t,"c",(function(){return f})),r.d(t,"f",(function(){return m})),r.d(t,"b",(function(){return p})),r.d(t,"a",(function(){return v})),r.d(t,"d",(function(){return g}));var n=r("QGCU"),o=r("2pNN"),a=r("oz8C"),c=r("fXoL"),s=r("tyNb"),h=r("F2nW"),d=function(){var e=function(){function e(t,r){i(this,e),this.router=t,this.globalServie=r}return u(e,[{key:"canActivate",value:function(){return!!a.a.getUserId()||(this.router.navigate(["staff/login"]),!1)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.lc(s.b),c.lc(h.a))},e.\u0275prov=c.Xb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),l=function(){var e=function(){function e(t,r){i(this,e),this.router=t,this.globalServie=r}return u(e,[{key:"canActivate",value:function(){return!!a.a.getUserId()||(isOnMobile()?this.router.navigate(["staff/login"]):this.router.navigate(["admin/login"]),!1)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.lc(s.b),c.lc(h.a))},e.\u0275prov=c.Xb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),f=function(){var e=function(){function e(t,r){i(this,e),this.router=t,this.globalServie=r}return u(e,[{key:"canActivate",value:function(){if(!new l(this.router,this.globalServie).canActivate())return!1;var e=n.a.getCurrentRole();if(e==o.h.Admin)return!0;switch(e){case o.h.Account:this.router.navigate(["staff/orders-manage"]);break;case o.h.Florist:this.router.navigate(["staff/florist-main"]);break;case o.h.Shipper:this.router.navigate(["staff/shipper-main"])}return!1}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.lc(s.b),c.lc(h.a))},e.\u0275prov=c.Xb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),m=function(){var e=function(){function e(t,r){i(this,e),this.router=t,this.globalServie=r}return u(e,[{key:"canActivate",value:function(){if(!new l(this.router,this.globalServie).canActivate())return!1;switch(n.a.getCurrentRole()){case o.h.Account:case o.h.Admin:this.router.navigate(["staff/orders-manage"]);break;case o.h.Florist:this.router.navigate(["staff/florist-main"]);break;case o.h.Shipper:this.router.navigate(["staff/shipper-main"])}return!1}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.lc(s.b),c.lc(h.a))},e.\u0275prov=c.Xb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),p=function(){var e=function(){function e(t,r){i(this,e),this.router=t,this.globalServie=r}return u(e,[{key:"canActivate",value:function(){if(!new d(this.router,this.globalServie).canActivate())return!1;var e=n.a.getCurrentRole();return e==o.h.Admin||e==o.h.Account||(this.router.navigate(["staff/login"]),!1)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.lc(s.b),c.lc(h.a))},e.\u0275prov=c.Xb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),v=function(){var e=function(){function e(t,r){i(this,e),this.router=t,this.globalServie=r}return u(e,[{key:"canActivate",value:function(){if(!new d(this.router,this.globalServie).canActivate())return!1;var e=n.a.getCurrentRole();return e==o.h.Admin||e==o.h.Account||e==o.h.Shipper||(this.router.navigate(["staff/login"]),!1)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.lc(s.b),c.lc(h.a))},e.\u0275prov=c.Xb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),g=function(){var e=function(){function e(t,r){i(this,e),this.router=t,this.globalServie=r}return u(e,[{key:"canActivate",value:function(){return!(!new d(this.router,this.globalServie).canActivate()||n.a.getCurrentRole()!=o.h.Florist&&(this.router.navigate(["staff/login"]),1))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.lc(s.b),c.lc(h.a))},e.\u0275prov=c.Xb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},"0zL+":function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r("mrSG"),o=r("uP5C"),a=r("jXcA"),c=r("dkQB"),s=r("fXoL"),h=r("pI0t"),d=r("F2nW"),l=function(){var e=function(){function e(t,r){i(this,e),this.httpService=t,this.globalService=r}return u(e,[{key:"updateAllCustomerMemberType",value:function(e){var t=this;return this.httpService.post(c.a.updateAllCustomerMemberType,{config:e}).then((function(e){return console.log(e),e})).catch((function(e){throw t.httpService.handleError(e),e}))}},{key:"updateFields",value:function(e,t){var r=this;return this.httpService.post(c.a.updateCustomerFields,{customerId:e,obj:t}).then((function(e){return e})).catch((function(e){throw r.httpService.handleError(e),e}))}},{key:"getById",value:function(e){var t=this;return this.httpService.get(c.a.getCustomeById,{id:e}).then((function(e){var t=e.customer,r=new o.a;return r.Id=t.Id,r.FullName=t.FullName,r.PhoneNumber=t.PhoneNumber,r.Birthday=t.Birthday,r.Sex=t.Sex,r.Address=new o.b,r.Address.Work=t.WorkAddress,r.Address.Home=t.HomeAddress,r.ContactInfo=new o.c,r.ContactInfo.Facebook=t.ContactInfo_Facebook,r.ContactInfo.Zalo=t.ContactInfo_Zalo,r.ContactInfo.Skype=t.ContactInfo_Skype,r.ContactInfo.Viber=t.ContactInfo_Viber,r.ContactInfo.Instagram=t.ContactInfo_Instagram,r.MainContactInfo=t.MainContactInfo,r.MembershipInfo=new o.d,r.MembershipInfo.AccumulatedAmount=t.AccumulatedAmount,r.MembershipInfo.UsedScoreTotal=t.UsedScoreTotal,r.MembershipInfo.AvailableScore=t.AvailableScore,r.MembershipInfo.MembershipType=t.MembershipType,r.ReceiverInfos=[],r.SpecialDays=[],t.customerreceivers.forEach((function(e){var t=new a.a;t.PhoneNumber=e.PhoneNumber,t.FullName=e.FullName,r.ReceiverInfos.push(t)})),t.customerspecialdays.forEach((function(e){var t=new o.e;t.Date=e.Date,t.Description=e.Description,r.SpecialDays.push(t)})),r})).catch((function(e){throw t.httpService.handleError(e),e}))}},{key:"updateReceiverList",value:function(e,t){var r=this,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.httpService.post(c.a.updateReciverInfo,{customerId:e,receiverList:t},n).then((function(e){return e})).catch((function(e){throw r.httpService.handleError(e),e}))}},{key:"getCount",value:function(){var e=this;return this.httpService.get(c.a.getCustomeCount).then((function(e){return e.max})).catch((function(t){throw e.httpService.handleError(t),t}))}},{key:"updateCustomer",value:function(e){var t=this,r=[];return e.SpecialDays&&e.SpecialDays.forEach((function(e){r.push({date:e.Date,description:e.Description})})),this.httpService.post(c.a.updateCustomer,{fullName:e.FullName,phoneNumber:e.PhoneNumber,birthday:e.Birthday,sex:e.Sex,usedScoreTotal:e.MembershipInfo.UsedScoreTotal,availableScore:e.MembershipInfo.AvailableScore,accumulatedAmount:e.MembershipInfo.AccumulatedAmount,membershipType:e.MembershipInfo.MembershipType,facebook:e.ContactInfo.Facebook,zalo:e.ContactInfo.Zalo,skype:e.ContactInfo.Skype,viber:e.ContactInfo.Viber,instagram:e.ContactInfo.Instagram,mainContactInfo:e.MainContactInfo,id:e.Id,specialDays:r,workAddress:e.Address.Work,homeAddress:e.Address.Home}).then((function(){})).catch((function(e){throw t.httpService.handleError(e),e}))}},{key:"updateList",value:function(e){var t=this;return this.httpService.post(c.a.updateCustomerList,e).then((function(e){return e})).catch((function(e){throw t.httpService.handleError(e),e}))}},{key:"createCustomers",value:function(e){return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r,n,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=[],e.forEach((function(e){r.push({fullName:e.FullName,phoneNumber:e.PhoneNumber,birthday:e.Birthday,sex:e.Sex,usedScoreTotal:e.MembershipInfo.UsedScoreTotal,availableScore:e.MembershipInfo.AvailableScore,accumulatedAmount:e.MembershipInfo.AccumulatedAmount,membershipType:e.MembershipInfo.MembershipType,facebook:e.ContactInfo.Facebook,zalo:e.ContactInfo.Zalo,skype:e.ContactInfo.Skype,viber:e.ContactInfo.Viber,instagram:e.ContactInfo.Instagram,mainContactInfo:e.MainContactInfo,homeAddress:e.Address.Home,workAddress:e.Address.Work,id:e.Id})})),i=[],n=0,o=r.length;case 4:if(!(n<o)){t.next=11;break}return i=r.slice(n,n+100),t.next=8,this.httpService.post(c.a.createCustomers,{customers:i}).then((function(e){console.log(n)}));case 8:n+=100,t.next=4;break;case 11:case"end":return t.stop()}}),t,this)})))}},{key:"createCustomer",value:function(e){var t=this;return this.httpService.post(c.a.createCustomer,{fullName:e.FullName,phoneNumber:e.PhoneNumber,birthday:e.Birthday,sex:e.Sex,usedScoreTotal:e.MembershipInfo.UsedScoreTotal,availableScore:e.MembershipInfo.AvailableScore,accumulatedAmount:e.MembershipInfo.AccumulatedAmount,membershipType:e.MembershipInfo.MembershipType,facebook:e.ContactInfo.Facebook,zalo:e.ContactInfo.Zalo,skype:e.ContactInfo.Skype,viber:e.ContactInfo.Viber,instagram:e.ContactInfo.Instagram,mainContactInfo:e.MainContactInfo,id:e.Id}).then((function(e){return e})).catch((function(e){t.httpService.handleError(e)}))}},{key:"delete",value:function(e){var t=this;return this.httpService.post(c.a.deleteCustomer,{id:e}).then((function(){})).catch((function(e){throw t.httpService.handleError(e),e}))}},{key:"deleteMany",value:function(e){var t=this;return this.httpService.post(c.a.deleteManyCustomer,{ids:e}).then((function(){})).catch((function(e){throw t.httpService.handleError(e),e}))}},{key:"getCustomerFromRaw",value:function(e){var t=[];return e.forEach((function(e){var r=new o.a;r.Id=e.Id,r.FullName=e.FullName,r.PhoneNumber=e.PhoneNumber,r.Birthday=e.Birthday,r.Sex=e.Sex,r.Address=new o.b,r.Address.Work=e.WorkAddress,r.Address.Home=e.HomeAddress,r.ContactInfo=new o.c,r.ContactInfo.Facebook=e.ContactInfo_Facebook,r.ContactInfo.Zalo=e.ContactInfo_Zalo,r.ContactInfo.Skype=e.ContactInfo_Skype,r.ContactInfo.Viber=e.ContactInfo_Viber,r.ContactInfo.Instagram=e.ContactInfo_Instagram,r.MainContactInfo=e.MainContactInfo,r.MembershipInfo=new o.d,r.MembershipInfo.AccumulatedAmount=e.AccumulatedAmount,r.MembershipInfo.UsedScoreTotal=e.UsedScoreTotal,r.MembershipInfo.AvailableScore=e.AvailableScore,r.MembershipInfo.MembershipType=e.MembershipType,r.ReceiverInfos=[],r.SpecialDays=[],e.customerreceivers&&e.customerreceivers.length>0&&e.customerreceivers.forEach((function(e){var t=new a.a;t.PhoneNumber=e.PhoneNumber,t.FullName=e.FullName,t.Address=e.Address,r.ReceiverInfos.push(t)})),e.customerspecialdays&&e.customerspecialdays.length>0&&e.customerspecialdays.forEach((function(e){var t=new o.e;t.Date=e.Date,t.Description=e.Description,r.SpecialDays.push(t)})),t.push(r)})),t}},{key:"getAll",value:function(){var e=this;return this.httpService.get(c.a.getAllCustomer).then((function(t){return e.getCustomerFromRaw(t.customers)})).catch((function(t){throw e.httpService.handleError(t),t}))}},{key:"getList",value:function(e,t,r){var n=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return this.httpService.get(c.a.getCustomers,{page:e-1,size:t,term:o,memberShipType:r}).then((function(e){var t={totalItemCount:0,totalPages:0,Customers:[]};return t.totalItemCount=e.totalItemCount,t.totalPages=e.totalPages,t.Customers=n.getCustomerFromRaw(e.items),t})).catch((function(e){throw n.httpService.handleError(e),e}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.lc(h.a),s.lc(d.a))},e.\u0275prov=s.Xb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},"2JOt":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=function e(){i(this,e)}},Abtb:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=function e(){i(this,e)}},EeL4:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n=r("TjQO"),o=r("dkQB"),a=r("fXoL"),c=r("pI0t"),s=r("F2nW"),h=function(){var e=function(){function e(t,r){i(this,e),this.htttpService=t,this.globalService=r}return u(e,[{key:"formatDate",value:function(e){var t=new Date(e);return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t.getTime()}},{key:"createPromotion",value:function(e){var t=this;return e.StartTime=this.formatDate(e.StartTime),e.EndTime=this.formatDate(e.EndTime),this.htttpService.post(o.a.createPromotion,{amount:e.Amount,promotionType:e.PromotionType,name:e.Name,startTime:e.StartTime,endTime:e.EndTime,isEnable:e.IsEnable}).then((function(e){return e})).catch((function(e){t.htttpService.handleError(e)}))}},{key:"updatePromotion",value:function(e){var t=this;return e.StartTime=this.formatDate(e.StartTime),e.EndTime=this.formatDate(e.EndTime),this.htttpService.post(o.a.updatePromotion,{amount:e.Amount,promotionType:e.PromotionType,name:e.Name,startTime:e.StartTime,endTime:e.EndTime,isEnable:e.IsEnable,id:e.Id}).then((function(e){return e})).catch((function(e){t.htttpService.handleError(e)}))}},{key:"deletePromotion",value:function(e){var t=this;return this.htttpService.post(o.a.deletePromotion,{id:e}).then((function(e){return e})).catch((function(e){t.htttpService.handleError(e)}))}},{key:"deletePromotions",value:function(e){var t=this;return this.htttpService.post(o.a.deletePromotions,{promotionIds:e}).then((function(e){return e})).catch((function(e){t.htttpService.handleError(e)}))}},{key:"getAvailablePromotions",value:function(e){var t=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.formatDate(e);return this.htttpService.post(o.a.getAvailable,{currentDate:n},r).then((function(e){var r=[];return e.promotions.forEach((function(e){r.push(t.getPromotionFromRaw(e))})),r})).catch((function(e){throw t.htttpService.handleError(e),e}))}},{key:"getAll",value:function(){var e=this;return this.htttpService.get(o.a.getAllPromotions).then((function(t){var r=[];return t.forEach((function(t){r.push(e.getPromotionFromRaw(t))})),r})).catch((function(t){throw e.htttpService.handleError(t),t}))}},{key:"getPromotionFromRaw",value:function(e){var t=new n.a;return t.Id=e.Id,t.PromotionType="Amount"==e.PromotionType?n.b.Amount:n.b.Percent,t.Name=e.Name,t.Amount=e.Amount,t.StartTime=e.StartTime,t.EndTime=e.EndTime,t.IsEnable=e.IsEnable,t}},{key:"getRecords",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return this.htttpService.get(o.a.getPromotions,{page:e-1,size:t,name:n}).then((function(e){if(!e)return null;var t={};return t.totalItemCount=+e.totalItemCount,t.totalPages=+e.totalPages,t.promotions=[],e.items&&e.items.forEach((function(e){t.promotions.push(r.getPromotionFromRaw(e))})),t})).catch((function(e){throw r.htttpService.handleError(e),e}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.lc(c.a),a.lc(s.a))},e.\u0275prov=a.Xb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},Gdn9:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r("nAti"),o=r("dkQB"),a=r("t6I5"),c=r("2JOt"),s=r("fXoL"),h=r("pI0t"),d=r("F2nW"),l=function(){var e=function(){function e(t,r){i(this,e),this.htttService=t,this.globalService=r}return u(e,[{key:"deleteProduct",value:function(e,t){var r=this;return this.htttService.post(o.a.deleteProduct,{productImg:t,productId:e}).then((function(){})).catch((function(e){r.htttService.handleError(e)}))}},{key:"deleteManyProducts",value:function(e,t){var r=this;return this.htttService.post(o.a.deleteManyProduct,{productIds:e,productImgNames:t}).then((function(e){})).catch((function(e){r.htttService.handleError(e)}))}},{key:"validateProductPrices",value:function(e){return(!e.PriceList||e.PriceList.length<1)&&(e.PriceList=[e.Price&&e.Price>0?e.Price:0]),(!e.Price||e.Price<=0)&&(e.Price=e.PriceList[0]),e.PriceList.indexOf(e.Price)<0&&(e.PriceList.push(e.Price),console.log(e.Price,e.PriceList)),e.PriceList=e.PriceList.filter((function(e,t,r){return r.indexOf(e)==t})),e}},{key:"insertListWithOneCate",value:function(e,t){var r=this;return this.htttService.post(o.a.addBulkOneCate,{products:t,categoryId:e}).then((function(e){})).catch((function(e){throw r.htttService.handleError(e),e}))}},{key:"updateProduct",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3?arguments[3]:void 0;e=this.validateProductPrices(e),console.log(e);var a={categoryIds:JSON.stringify(r),tagIds:JSON.stringify(n),description:e.Description,price:e.Price,name:e.Name,productImg:i,id:e.Id,oldProductImg:e.ImageUrl,priceList:JSON.stringify(e.PriceList)};return this.htttService.postForm(o.a.updateProduct,a).then((function(e){return t.globalService.stopLoading(),e})).catch((function(e){t.htttService.handleError(e)}))}},{key:"createProduct",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3?arguments[3]:void 0;e=this.validateProductPrices(e);var a={categoryIds:JSON.stringify(r),tagIds:JSON.stringify(n),description:e.Description,price:e.Price,name:e.Name,productImg:i,priceList:JSON.stringify(e.PriceList)};return this.htttService.postForm(o.a.createProduct,a).then((function(e){return t.globalService.stopLoading(),e})).catch((function(e){t.htttService.handleError(e)}))}},{key:"getProductsFromRaw",value:function(e){var t=[];return e.forEach((function(e){var r=new n.a;r.Id=e.Id,r.Name=e.Name,r.Price=e.Price,r.ImageUrl=e.ImageUrl,r.PriceList=e.PriceList?JSON.parse(e.PriceList):[],r.Description=e.Description;var o=[];e.tags.forEach((function(e){var t=new c.a;t.Name=e.Name,t.Description=e.Description,t.Alias=e.Alias,t.Id=e.Id,o.push(t)}));var i=[];e.categories.forEach((function(e){var t=new a.a;t.Id=e.Id,t.Description=e.Description,t.Name=e.Name,i.push(t)})),t.push({Product:r,Tags:o,Categories:i})})),t}},{key:"getAll",value:function(){var e=this;return this.htttService.post(o.a.getAllProducts).then((function(t){return e.getProductsFromRaw(t.products)}))}},{key:"get",value:function(e,t){var r=this;return this.htttService.post(e,t).then((function(e){if(!e)return null;var t={totalItemCount:0,totalPages:0,products:[]};return e.items?(t.totalItemCount=e.totalItemCount,t.totalPages=e.totalPages,t.products=r.getProductsFromRaw(e.items),t):null})).catch((function(e){throw r.htttService.handleError(e),e}))}},{key:"getRecords",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return this.get(o.a.getProducts,{page:e-1,size:t,name:i,categoryId:r,tagIds:n})}},{key:"getRecordsByPrice",value:function(e,t,r,n){return this.get(o.a.getProductsByPrice,{page:e-1,size:t,price:n,categoryId:r})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.lc(h.a),s.lc(d.a))},e.\u0275prov=s.Xb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},LQcV:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r("2pNN"),o=r("AytR"),a=r("oz8C"),c=r("fXoL"),s=function(){var e=function(){function e(){i(this,e)}return u(e,null,[{key:"getPreVATVal",value:function(e){return e/1.1}},{key:"detectMemberShipType",value:function(e){var t=a.a.getConfig();return e<t.MemberValue?n.c.NewCustomer:e>=t.MemberValue&&e<t.VipValue?n.c.Member:e>=t.VipValue&&e<t.VVipValue?n.c.Vip:e>=t.VVipValue?n.c.VVip:void 0}},{key:"getMemberDiscountPercent",value:function(e){var t=a.a.getConfig();switch(e){case n.c.NewCustomer:return 0;case n.c.Member:return t.MemberDiscount;case n.c.Vip:return t.VipDiscount;case n.c.VVip:return t.VVipDiscount}}},{key:"detectCustomerId",value:function(e){return e>9999?"FD-"+e.toString():e>999?"FD-0"+e.toString():e>99?"FD-00"+e.toString():e>9?"FD-000"+e.toString():"FD-0000"+e.toString()}},{key:"getFullImgUrl",value:function(e,t){return console.log(t),t.indexOf("http")>=0?t:"".concat(o.a.base_domain).concat(e).concat(t)}},{key:"getMainContact",value:function(e){switch(e.MainContactInfo){case n.b.Facebook:return e.ContactInfo.Facebook;case n.b.Zalo:return e.ContactInfo.Zalo;case n.b.Skype:return e.ContactInfo.Skype;case n.b.Viber:return e.ContactInfo.Viber;case n.b.Instagram:return e.ContactInfo.Instagram;default:return e.ContactInfo.Zalo}}},{key:"getFinalPrice",value:function(e,t,r,n){return n?e-e/100*t+r:e+r}},{key:"getGainedScore",value:function(e){return e/1e5}},{key:"getAmountFromScore",value:function(e){return 1e5*e}},{key:"getScoreFromOrder",value:function(e){var t=e.TotalAmount;return e.VATIncluded&&(t/=1.1),e.OrderDetails.forEach((function(e){e.AdditionalFee&&(t-=e.AdditionalFee)})),t/1e5}},{key:"getDetailDiscount",value:function(e){var t=0;return e.PercentDiscount&&e.PercentDiscount>0&&(t=e.ModifiedPrice/100*e.PercentDiscount),e.AmountDiscount&&e.AmountDiscount>0&&(t+=e.AmountDiscount),t}},{key:"geExchangableAmount",value:function(e){return 1e3*e}},{key:"receiverInfoCompare",value:function(e,t){return e.Address===t.Address&&e.FullName===t.FullName&&e.PhoneNumber===t.PhoneNumber}},{key:"deliveryInfoCompare",value:function(e,t){return!(!this.dateCompare(e.DateTime,t.DateTime)||e.Address!==t.Address||e.FullName!==t.FullName||e.PhoneNumber!==t.PhoneNumber)}},{key:"dateCompare",value:function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()&&e.getHours()===t.getHours()&&e.getMinutes()===t.getMinutes()}},{key:"getTimeFromExcel",value:function(e){if(!e||""==e)return 0;if(!(e.toString().indexOf("/")>-1)){var t=parseInt(e);return new Date(86400*(t-25569)*1e3).getTime()}var r=e.split("/",3);if(console.log(r),3==r.length){var n=r[2].indexOf(".")>-1?0:parseInt(r[2]),o=parseInt(r[1])-1,i=parseInt(r[0]);return new Date(n,o,i,0,0,0,0).getTime()}}},{key:"stringPriceToNumber",value:function(e){var t=e.substring(0,e.length-1).replace(/,/g,"");return parseFloat(t)||0}},{key:"getAlias",value:function(e){if(!e)return"";var t=e.toLowerCase();return(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/\xe0|\xe1|\u1ea1|\u1ea3|\xe3|\xe2|\u1ea7|\u1ea5|\u1ead|\u1ea9|\u1eab|\u0103|\u1eb1|\u1eaf|\u1eb7|\u1eb3|\u1eb5/g,"a")).replace(/\xe8|\xe9|\u1eb9|\u1ebb|\u1ebd|\xea|\u1ec1|\u1ebf|\u1ec7|\u1ec3|\u1ec5/g,"e")).replace(/\xec|\xed|\u1ecb|\u1ec9|\u0129/g,"i")).replace(/\xf2|\xf3|\u1ecd|\u1ecf|\xf5|\xf4|\u1ed3|\u1ed1|\u1ed9|\u1ed5|\u1ed7|\u01a1|\u1edd|\u1edb|\u1ee3|\u1edf|\u1ee1/g,"o")).replace(/\xf9|\xfa|\u1ee5|\u1ee7|\u0169|\u01b0|\u1eeb|\u1ee9|\u1ef1|\u1eed|\u1eef/g,"u")).replace(/\u1ef3|\xfd|\u1ef5|\u1ef7|\u1ef9/g,"y")).replace(/\u0111/g,"d")).replace(/!|@|%|\^|\*|\(|\)|\+|\=|\<|\>|\?|\/|,|\.|\:|\;|\'|\"|\&|\#|\[|\]|~|\$|_|`|-|{|}|\||\\/g," ")).replace(/ + /g," ")).trim().replace(/ /g,"-")}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.Xb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},NWHx:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r("dkQB"),o=r("Abtb"),a=r("fXoL"),c=r("pI0t"),s=function(){var e=function(){function e(t){i(this,e),this.httpService=t}return u(e,[{key:"delete",value:function(e){var t=this;return this.httpService.post(n.a.deletePurchase,{purchaseId:e}).then((function(e){return e})).catch((function(e){throw t.httpService.handleError(e),e}))}},{key:"getByTerm",value:function(e,t,r,i,a,u){var c=this;return this.httpService.post(n.a.getPurchaseByTerm,{page:t-1,size:r,startTime:i,endTime:a,term:e,isUnknownOnly:u}).then((function(e){var t={totalItemCount:0,items:[],totalPages:0,currentPage:0};return t.totalItemCount=e.totalItemCount,t.currentPage=e.currentPage,t.totalPages=e.totalPages,e.items.forEach((function(e){var r=new o.a;r.Id=e.Id,r.AddingTime=e.AddingTime,r.Amount=e.Amount,r.Method=e.Method,r.OrderId=e.OrderId?e.OrderId:"",r.Note=e.Note?e.Note:"",t.items.push(r)})),t})).catch((function(e){throw c.httpService.handleError(e),e}))}},{key:"bulkInsert",value:function(e){return this.httpService.post(n.a.bulkInsertPurchase,{purchases:e}).then((function(e){return e}))}},{key:"bulkCreate",value:function(e,t,r){var o=this,i=[];e.forEach((function(e){e.Id&&0!=e.Id||i.push(e)})),i.length<=0&&r(),this.httpService.post(n.a.bulkAddPurchase,{purchases:i,orderId:t}).then((function(e){r()})).catch((function(e){throw o.httpService.handleError(e),e}))}},{key:"assignToOrder",value:function(e,t,r){return this.httpService.post(n.a.assignPurchaseOrder,{orderId:t,purchaseId:e,amount:r}).then((function(e){return e}))}},{key:"update",value:function(e,t,r){var o=this;return this.httpService.post(n.a.updatePurchaseOrder,{orderId:e.OrderId,amount:e.Amount,method:e.Method,id:e.Id,oldAmount:r,oldOrderId:t,addingTime:e.AddingTime,note:e.Note}).then((function(e){return e})).catch((function(e){throw o.httpService.handleError(e),e}))}},{key:"createOrUpdate",value:function(e,t){var r=this;return this.httpService.post(n.a.addPurchase,{orderId:e.OrderId,amount:e.Amount,method:e.Method,newtotalPaidAmount:t,id:e.Id,addingTime:e.AddingTime,note:e.Note}).then((function(e){return e.purchase})).catch((function(e){throw r.httpService.handleError(e),e}))}},{key:"addAndAssign",value:function(e){var t=this;return this.httpService.post(n.a.addAndAsign,e).then((function(e){return e})).catch((function(e){throw t.httpService.handleError(e),e}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.lc(c.a))},e.\u0275prov=a.Xb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},TjQO:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o}));var n=function e(){i(this,e)},o=function(e){return e[e.Amount=0]="Amount",e[e.Percent=1]="Percent",e}({})},cPV5:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n=r("t6I5"),o=r("dkQB"),a=r("fXoL"),c=r("pI0t"),s=r("F2nW"),h=function(){var e=function(){function e(t,r){i(this,e),this.htttpService=t,this.globalService=r}return u(e,[{key:"createCategory",value:function(e){var t=this;return this.htttpService.post(o.a.createCategory,{name:e.Name,description:e.Description}).then((function(e){return e})).catch((function(e){t.htttpService.handleError(e)}))}},{key:"updateCategory",value:function(e){var t=this;return this.htttpService.post(o.a.updateCategory,{name:e.Name,description:e.Description,id:e.Id}).then((function(e){return e})).catch((function(e){t.htttpService.handleError(e)}))}},{key:"deleteCategory",value:function(e){var t=this;return this.htttpService.post(o.a.deleteCategory,{id:e}).then((function(e){return e})).catch((function(e){t.htttpService.handleError(e)}))}},{key:"deleteCategorys",value:function(e){var t=this;return this.htttpService.post(o.a.deleteCategories,{categoryIds:e}).then((function(e){return e})).catch((function(e){t.htttpService.handleError(e)}))}},{key:"getAll",value:function(){var e=this;return this.htttpService.get(o.a.getAllCategories,!1).then((function(e){var t=[];return e.forEach((function(e){var r=new n.a;r.Id=e.Id,r.Description=e.Description,r.Name=e.Name,t.push(r)})),t})).catch((function(t){throw e.htttpService.handleError(t),t}))}},{key:"getRecords",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return this.htttpService.get(o.a.getCategories,{page:e-1,size:t,description:n}).then((function(e){if(!e)return null;var t={};return t.totalItemCount=+e.totalItemCount,t.totalPages=+e.totalPages,t.categories=[],e.items&&e.items.forEach((function(e){t.categories.push(e)})),t})).catch((function(e){throw r.htttpService.handleError(e),e}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.lc(c.a),a.lc(s.a))},e.\u0275prov=a.Xb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},e6qa:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n=r("dkQB"),o=r("r5y0"),a=r("fXoL"),c=r("pI0t"),s=r("F2nW"),h=function(){var e=function(){function e(t,r){i(this,e),this.httpService=t,this.globalService=r}return u(e,[{key:"updateFields",value:function(e,t){var r=this;return this.httpService.post(n.a.updateODFields,{obj:t,orderDetailId:+e}).then((function(e){return e.result})).catch((function(e){throw r.httpService.handleError(e),e}))}},{key:"updateStatusByOrderId",value:function(e,t,r){var o=this;return this.httpService.post(n.a.updateStatusByOrderId,{orderId:e,status:t,doneTime:r}).then((function(e){return e})).catch((function(e){throw o.httpService.handleError(e),e}))}},{key:"getNextMakingSortOrder",value:function(){var e=this;return this.httpService.get(n.a.getMaxMakingSortOrder).then((function(e){return e.maxMakingSortOrder+1})).catch((function(t){throw e.httpService.handleError(t),t}))}},{key:"resultConfirm",value:function(e,t){var r=this;return this.httpService.postForm(n.a.resultConfirm,{orderDetailId:e,resultImg:t}).then((function(e){return e})).catch((function(e){throw r.httpService.handleError(e),e}))}},{key:"shippingConfirm",value:function(e,t,r){var o=this;return this.httpService.postForm(n.a.shippingConfirm,{orderDetailId:e,shippingImg:t,deliveryCompletedTime:(new Date).getTime(),note:r}).then((function(e){return e})).catch((function(e){throw o.httpService.handleError(e),e}))}},{key:"getNextShippingSortOrder",value:function(){var e=this;return this.httpService.get(n.a.getMaxShippingSortOrder).then((function(e){return e.maxShippingSortOrder+1})).catch((function(t){throw e.httpService.handleError(t),t}))}},{key:"updateMakingSortOrders",value:function(e){var t=this;return this.httpService.post(n.a.updateMakingSortOrder,{details:e}).then((function(e){return e})).catch((function(e){throw t.httpService.handleError(e),e}))}},{key:"updateShippingSortOrders",value:function(e){var t=this;return this.httpService.post(n.a.updateShippingSortOrder,{details:e}).then((function(e){return e})).catch((function(e){throw t.httpService.handleError(e),e}))}},{key:"getFromRaw",value:function(e){var t=new o.c;return t.ProductName=e.ProductName,t.OrderId=e.OrderId,t.OrderDetailId=e.Id.toString(),t.State=e.State,t.ProductId=e.ProductId,t.ProductImageUrl=e.ProductImageUrl,t.Index=e.Index,t.DeliveryInfo.Address=e.ReceivingAddress,t.DeliveryInfo.DateTime=new Date(e.ReceivingTime),t.DeliveryInfo.FullName=e.ReceiverName,t.DeliveryInfo.PhoneNumber=e.ReceiverPhoneNumber,t.PurposeOf=e.PurposeOf,t.OriginalPrice=e.ProductPrice,t.ModifiedPrice=e.ProductPrice,t.AdditionalFee=e.AdditionalFee,t.MakingSortOrder=e.MakingSortOrder,t.ShippingSortOrder=e.ShippingSortOrder,t.IsVATIncluded=e.IsVATIncluded,t.Description=e.Description,t.CustomerName=e.CustomerName,t.CustomerPhoneNumber=e.CustomerPhoneNumber,t.HardcodeImageName=e.HardcodeImageName,t.PercentDiscount=e.PercentDiscount,t.AmountDiscount=e.AmountDiscount,t.MakingRequestTime=e.MakingRequestTime,t.DeliveryCompletedTime=e.DeliveryCompletedTime,t.ShippingSessionId=e.ShippingSessionId,t.MakingStartTime=e.MakingStartTime,t.MakingCompletedTime=e.MakingCompletedTime,t.ResultImageUrl=e.ResultImageUrl,t.DeliveryImageUrl=e.DeliveryImageUrl,t.MakingNote=e.MakingNote,t}},{key:"getByState",value:function(e){return this.getByStates([e])}},{key:"getByStates",value:function(e){var t=this;return this.httpService.post(n.a.getOrderDetailByStates,{states:e}).then((function(e){var r=[];return null==e||null==e.orderDetails?[]:(e.orderDetails.forEach((function(e){r.push(t.getFromRaw(e))})),r)})).catch((function(e){throw t.httpService.handleError(e),e}))}},{key:"getByOrderId",value:function(e){var t=this;return this.httpService.post(n.a.getOrderDetailsByOrderId,{orderId:e}).then((function(e){var r=[];return null==e||null==e.orderDetails?[]:(e.orderDetails.forEach((function(e){r.push(t.getFromRaw(e))})),r)})).catch((function(e){throw t.httpService.handleError(e),e}))}},{key:"assignSingleOD",value:function(e,t,r){return this.httpService.post(n.a.assignSingleOD,{orderDetailId:e,shipperId:t,assignTime:r}).then((function(e){return e}))}},{key:"assignOrderDetails",value:function(e,t,r){return this.httpService.post(n.a.assignOrderDetails,{orderDetailIds:e,shipperId:t,assignTime:r}).then((function(e){return e}))}},{key:"getByStateAndFloristId",value:function(e,t){return this.getByStatesAndFloristId(e,[t])}},{key:"getByStatesAndFloristId",value:function(e,t){var r=this;return this.httpService.post(n.a.getOrderDetailByStatesAndFloristId,{states:t,floristId:e}).then((function(e){var t=[];return e.orderDetails.forEach((function(e){t.push(r.getFromRaw(e))})),t})).catch((function(e){throw r.httpService.handleError(e),e}))}},{key:"getShippingOrderDetails",value:function(e){var t=this;return this.httpService.post(n.a.getShippingOrderDetails,{shipperId:e}).then((function(e){var r=[];return null==e||e.length<=0?[]:(e.forEach((function(e){r.push(t.getFromRaw(e.orderdetail))})),r)})).catch((function(e){throw t.httpService.handleError(e),e}))}},{key:"updateDetailSeen",value:function(e,t,r){var o=this,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return this.httpService.post(n.a.updateDetailSeen,{userId:t,orderDetailId:e,seenTime:r},i).then((function(e){return e})).catch((function(e){throw o.httpService.handleError(e),e}))}},{key:"getODFlorisAndShipper",value:function(e){var t=this;return this.httpService.post(n.a.getOrderDetailShipperAndFlorist,{orderDetailId:e}).then((function(e){return{Florist:e.florist,Shipper:e.shipper,FixingFlorist:e.fixingFlorist}})).catch((function(e){throw t.httpService.handleError(e),e}))}},{key:"getODSeeners",value:function(e){var t=this;return this.httpService.post(n.a.getODSeeners,{orderDetailId:e}).then((function(e){var t=[];return e&&null!=e&&e.seeners.length>0&&e.seeners.forEach((function(e){t.push({FullName:e.user?e.user.FullName:"",UserId:e.user?e.user.Id:0,Role:e.user&&e.user.roles?e.user.roles[0].Name:"",SeenTime:e.SeenTime?e.SeenTime:0,Avt:e.user?e.user.AvtUrl:""})})),t})).catch((function(e){throw t.httpService.handleError(e),e}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.lc(c.a),a.lc(s.a))},e.\u0275prov=a.Xb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},jXcA:function(t,n,o){"use strict";o.d(n,"e",(function(){return s})),o.d(n,"f",(function(){return h})),o.d(n,"c",(function(){return d})),o.d(n,"b",(function(){return l})),o.d(n,"d",(function(){return f})),o.d(n,"a",(function(){return p}));var a=o("sWfF"),c=o("2pNN"),s=function(t){e(o,t);var n=r(o);function o(){var e;return i(this,o),(e=n.apply(this,arguments)).CustomerId="",e.AccountId="",e.VATIncluded=!1,e.TotalAmount=0,e.TotalPaidAmount=0,e.GainedScore=0,e.ScoreUsed=0,e.PercentDiscount=0,e.AmountDiscount=0,e}return o}(a.a),h=function e(){i(this,e),this.Id=0,this.OrderId="",this.AdditionalFee=0,this.ProductId=0,this.ProductName="",this.ProductImageUrl="",this.ProductModifiedPrice=0,this.ProductPrice=0,this.TotalAmount=0,this.Description="",this.Index=-1,this.State=c.e.Added,this.MakingSortOrder=0,this.ShippingSortOrder=0,this.IsVATIncluded=!1,this.Quantity=1,this.PurposeOf="",this.IsHardcodeProduct=!1,this.HardcodeProductImageName="",this.CustomerName="",this.CustomerPhoneNumber="",this.NoteImagesBlobbed="",this.DeliveryInfo=new m,this.FloristInfo=new l,this.ShipperInfo=new f,this.SeenUsers=[],this.NoteImages=[]},d=function(){function e(){i(this,e)}return u(e,null,[{key:"DeepCopy",value:function(t){var r=new e;return r.Avt=t.Avt,r.FullName=t.FullName,r.Role=t.Role,r.UserId=t.UserId,r.SeenTime=t.SeenTime,r}}]),e}(),l=function e(){i(this,e)},f=function e(){i(this,e)},m=function e(){i(this,e),this.ReceivingTime=0,this.ReceiverDetail=new p},p=function e(){i(this,e),this.FullName="",this.PhoneNumber="",this.Address=""}},kLqA:function(e,t,r){"use strict";t.__esModule=!0;var n=function(){function e(t){if(!t)throw new TypeError("Invalid argument; `value` has no value.");this.value=e.EMPTY,t&&e.isGuid(t)&&(this.value=t)}return e.isGuid=function(t){var r=t.toString();return t&&(t instanceof e||e.validator.test(r))},e.create=function(){return new e([e.gen(2),e.gen(1),e.gen(1),e.gen(1),e.gen(3)].join("-"))},e.createEmpty=function(){return new e("emptyguid")},e.parse=function(t){return new e(t)},e.raw=function(){return[e.gen(2),e.gen(1),e.gen(1),e.gen(1),e.gen(3)].join("-")},e.gen=function(e){for(var t="",r=0;r<e;r++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t},e.prototype.equals=function(t){return e.isGuid(t)&&this.value===t.toString()},e.prototype.isEmpty=function(){return this.value===e.EMPTY},e.prototype.toString=function(){return this.value},e.prototype.toJSON=function(){return{value:this.value}},e.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),e.EMPTY="00000000-0000-0000-0000-000000000000",e}();t.Guid=n},kVqo:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n,o=r("uP5C"),a=r("jXcA"),c=r("dkQB"),s=r("r5y0"),h=r("LQcV"),d=function e(){i(this,e)},l=r("Abtb"),f=r("fXoL"),m=r("pI0t"),p=((n=function(){function e(t){i(this,e),this.httpService=t}return u(e,[{key:"getCustomerInfo",value:function(e,t){var r=new s.a;return r.Name=e.FullName,r.PhoneNumber=e.PhoneNumber,r.AvailableScore=e.MembershipInfo.AvailableScore,r.DiscountPercent=h.a.getMemberDiscountPercent(e.MembershipInfo.MembershipType),r.Id=e.Id,r.GainedScore=t.CustomerInfo.GainedScore,r.ScoreUsed=t.CustomerInfo.ScoreUsed,r.AccumulatedAmount=e.MembershipInfo.AccumulatedAmount,r.Address=e.Address.Home?e.Address.Home:e.Address.Work?e.Address.Work:"",r.CustomerScoreUsedTotal=e.MembershipInfo.UsedScoreTotal,r.ReceiverInfos=[],r.ReceiverInfos=[],e.ReceiverInfos.forEach((function(e){var t=new a.a;t.PhoneNumber=e.PhoneNumber,t.FullName=e.FullName,r.ReceiverInfos.push(t)})),e.SpecialDays.forEach((function(e){var t=new o.e;t.Date=e.Date,t.Description=e.Description,r.SpecialDays.push(t)})),r}},{key:"getOrderVMByRaw",value:function(e){var t=new s.d;return null==e?null:(t.OrderId=e.Id,t.TotalAmount=e.TotalAmount,t.TotalPaidAmount=e.TotalPaidAmount,t.VATIncluded=e.VATIncluded,t.OrderType=e.OrderType,t.CreatedDate=new Date(e.CreatedDate),t.PercentDiscount=e.PercentDiscount,t.AmountDiscount=e.AmountDiscount,t.IsMemberDiscountApply=e.IsMemberDiscountApply,t.DoneTime=!e.DoneTime||e.DoneTime<=0?e.CreatedDate:e.DoneTime,e.purchases&&e.purchases.forEach((function(e){var r=new l.a;r.Id=e.Id,r.OrderId=e.OrderId,r.Amount=e.Amount,r.Method=e.Method,r.Note=e.Note,r.AddingTime=e.AddingTime,t.PurchaseItems.push(r)})),t.CustomerInfo=new s.a,e.customer&&(t.CustomerInfo.Name=e.customer.FullName,t.CustomerInfo.PhoneNumber=e.customer.PhoneNumber,t.CustomerInfo.AvailableScore=e.customer.AvailableScore,t.CustomerInfo.DiscountPercent=h.a.getMemberDiscountPercent(e.customer.MembershipType),t.CustomerInfo.Id=e.customer.Id,t.CustomerInfo.GainedScore=e.GainedScore,t.CustomerInfo.ScoreUsed=e.ScoreUsed,t.CustomerInfo.AccumulatedAmount=e.customer.AccumulatedAmount,t.CustomerInfo.Address=e.customer.HomeAddress?e.customer.HomeAddress:e.customer.WorkAddress?e.customer.WorkAddress:"",t.CustomerInfo.CustomerScoreUsedTotal=e.customer.UsedScoreTotal,t.CustomerInfo.ReceiverInfos=[],t.CustomerInfo.ReceiverInfos=[]),e.orderdetails&&e.orderdetails.length>0&&e.orderdetails.forEach((function(e){var r=new s.c;r.ProductName=e.ProductName,r.OrderId=e.OrderId,r.OrderDetailId=e.Id.toString(),r.State=e.State,r.ProductId=e.ProductId,r.ProductImageUrl=e.ProductImageUrl,r.Index=e.Index,r.DeliveryInfo.Address=e.ReceivingAddress,r.DeliveryInfo.DateTime=new Date(e.ReceivingTime),r.DeliveryInfo.FullName=e.ReceiverName,r.DeliveryInfo.PhoneNumber=e.ReceiverPhoneNumber,r.PurposeOf=e.PurposeOf,r.OriginalPrice=e.ProductPrice,r.ModifiedPrice=e.ProductPrice,r.AdditionalFee=e.AdditionalFee,r.MakingSortOrder=e.MakingSortOrder,r.ShippingSortOrder=e.ShippingSortOrder,r.IsVATIncluded=e.IsVATIncluded,r.Description=e.Description,r.CustomerName=e.CustomerName,r.IsFromHardCodeProduct=e.IsHardcodeProduct,r.CustomerPhoneNumber=e.CustomerPhoneNumber,r.HardcodeImageName=e.HardcodeImageName,r.PercentDiscount=e.PercentDiscount,r.AmountDiscount=e.AmountDiscount,r.DeliveryCompletedTime=e.DeliveryCompletedTime,r.MakingStartTime=e.MakingStartTime,r.MakingRequestTime=e.MakingRequestTime,r.MakingCompletedTime=e.MakingCompletedTime,r.ResultImageUrl=e.ResultImageUrl,r.MakingNote=e.MakingNote,r.DeliveryImageUrl=e.DeliveryImageUrl,r.ShippingNote=e.ShippingNote,r.FixingFloristId=e.FixingFloristId,r.Quantity=e.Quantity?e.Quantity:1,r.NoteImages=e.NoteImages?e.NoteImages.split(","):[],t.OrderDetails.push(r)})),t)}},{key:"addBulk",value:function(e){return this.httpService.post(c.a.addBulkOrder,e).then((function(e){return e.message}))}},{key:"getSaleModels",value:function(e){var t=[];return e.forEach((function(e){var r=new d;r.OrderId=e.OrderId,r.CreatedDate=e.CreatedDate,r.CustomerId=e.CustomerInfo.Id,r.CustomerName=e.CustomerInfo.Name,r.CustomerPhoneNumber=e.CustomerInfo.PhoneNumber,r.AmountTotal=e.TotalAmount,r.FeeTotal=0,r.DiscountTotal=0,r.PriceTotal=0,r.IsVATIncluded=e.VATIncluded,e.OrderDetails.forEach((function(e){r.PriceTotal+=e.ModifiedPrice,r.FeeTotal+=e.AdditionalFee})),r.FinalTotal=e.VATIncluded?h.a.getPreVATVal(r.AmountTotal):r.AmountTotal,r.DiscountTotal=r.PriceTotal+r.FeeTotal-r.FinalTotal,t.push(r)})),t.sort((function(e,t){return e.CreatedDate<t.CreatedDate?-1:e.CreatedDate>t.CreatedDate?1:0})),t}},{key:"getSaleTotalByTimes",value:function(e,t){var r=this;return this.httpService.post(c.a.getCompletedOrderByDayRange,{startDate:e,endDate:t}).then((function(e){var t=r.getOrderVMsByRaw(e.orders);return r.getSaleModels(t)})).catch((function(e){throw r.httpService.handleError(e),e}))}},{key:"getSaleTotalByYear",value:function(e){var t=new Date;t.setFullYear(e,0,1),t.setHours(0,0,0,0);var r=new Date;return r.setFullYear(e,11,31),r.setHours(23,59,59,0),this.getSaleTotalByTimes(t.getTime(),r.getTime())}},{key:"getSaleTotalByRange",value:function(e){var t=new Date(e[1]);return t.setDate(t.getDate()+1),this.getSaleTotalByTimes(e[0],t.getTime())}},{key:"getOrderVMsByRaw",value:function(e){var t=this,r=[];return!e||e.length<=0?[]:(e.forEach((function(e){r.push(t.getOrderVMByRaw(e))})),r)}},{key:"getDebtOrders",value:function(e,t,r,n){var o=this;return this.httpService.post(c.a.getDebts,{page:e-1,size:t,startTime:r,endTime:n}).then((function(e){var t={totalItemCount:0,totalPages:0,orders:[]};return t.totalItemCount=e.totalItemCount,t.totalPages=e.totalPages,t.orders=o.getOrderVMsByRaw(e.items),t})).catch((function(e){throw o.httpService.handleError(e),e}))}},{key:"getById",value:function(e){var t=this;return this.httpService.post(c.a.getById,{id:e}).then((function(e){return e?t.getOrderVMByRaw(e.order):null})).catch((function(e){throw t.httpService.handleError(e),e}))}},{key:"getSingleById",value:function(e){var t=this;return this.httpService.post(c.a.getOrderNotLazyById,{id:e}).then((function(e){return e?t.getOrderVMByRaw(e.order):null})).catch((function(e){throw t.httpService.handleError(e),e}))}},{key:"updateFields",value:function(e,t){var r=this;return this.httpService.post(c.a.updateOrderFields,{obj:t,orderId:e}).then((function(e){return e.result})).catch((function(e){throw r.httpService.handleError(e),e}))}},{key:"getOrderViewModelsByCusId",value:function(e){var t=this;return this.httpService.post(c.a.getOrdersByCustomerId,{customerId:e}).then((function(e){return t.getOrderVMsByRaw(e.orders)})).catch((function(e){throw t.httpService.handleError(e),e}))}},{key:"searchOrders",value:function(e,t,r,n){var o=this;return this.httpService.post(c.a.searchOrders,{term:n,page:e,size:t,statuses:r}).then((function(e){var t={totalItemCount:0,totalPages:0,orders:[]};return t.totalItemCount=e.totalItemCount,t.totalPages=e.totalPages,t.orders=o.getOrderVMsByRaw(e.items),t})).catch((function(e){throw o.httpService.handleError(e),e}))}},{key:"getMaxNumberId",value:function(e){var t=this;return this.httpService.post(c.a.getMaxOrderNumberId,{year:e}).then((function(e){return e.max})).catch((function(e){throw t.httpService.handleError(e),e}))}},{key:"deleteOrderDetailByOrderId",value:function(e){var t=this;return this.httpService.post(c.a.deleteOrderDetailByOrderId,{orderId:e}).then((function(e){})).catch((function(e){throw t.httpService.handleError(e),e}))}},{key:"uploadNoteImg",value:function(e){var t=this;return this.httpService.postForm(c.a.uploadNoteImage,{noteImg:e},!1).then((function(e){return e.imgName})).catch((function(e){throw t.httpService.handleError(e),e}))}},{key:"addOrderDetails",value:function(e){var t=this;return console.log(e),this.httpService.post(c.a.addOrderDetails,{orderDetails:e}).then((function(e){return e})).catch((function(e){throw t.httpService.handleError(e),e}))}},{key:"updateOrderInfos",value:function(e,t,r,n){var o=this;return this.httpService.post(c.a.updateOrderInfos,{orderDetails:t,orderId:e,totalPaidAmount:r,customerId:n}).then((function(e){return e})).catch((function(e){throw o.httpService.handleError(e),e}))}},{key:"addOrEditOrder",value:function(e,t){var r=this;return this.httpService.post(t?c.a.editOrder:c.a.addOrder,{customerId:e.CustomerId,id:e.Id,vatIncluded:e.VATIncluded,totalAmount:e.TotalAmount,totalPaidAmount:e.TotalPaidAmount,gaindedScore:e.GainedScore,scoreUsed:e.ScoreUsed,orderType:e.OrderType,createdDate:e.Created,percentDiscount:e.PercentDiscount,amountDiscount:e.AmountDiscount,isMemberDiscountApply:e.IsMemberDiscountApply,doneTime:e.DoneTime}).then((function(t){return e})).catch((function(e){throw r.httpService.handleError(e),e}))}}]),e}()).\u0275fac=function(e){return new(e||n)(f.lc(m.a))},n.\u0275prov=f.Xb({token:n,factory:n.\u0275fac,providedIn:"root"}),n)},lBcp:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n=r("2JOt"),o=r("dkQB"),a=r("fXoL"),c=r("pI0t"),s=r("F2nW"),h=function(){var e=function(){function e(t,r){i(this,e),this.htttService=t,this.globalService=r}return u(e,[{key:"bulkAdd",value:function(e){var t=this,r=[];return e.forEach((function(e){r.push({Alias:e.Alias,Name:e.Name})})),this.htttService.post(o.a.bulkAddTags,e).then((function(e){return e})).catch((function(e){throw t.htttService.handleError(e),e}))}},{key:"addBulkProductTag",value:function(e){var t=this;return this.htttService.post(o.a.bulkAddProductsTags,e).then((function(e){return e})).catch((function(e){throw t.htttService.handleError(e),e}))}},{key:"getAll",value:function(){var e=this;return this.htttService.get(o.a.getAllTags).then((function(e){var t=[];return e.forEach((function(e){var r=new n.a;r.Id=e.Id,r.Description=e.Description,r.Name=e.Name,r.Alias=e.Alias,t.push(r)})),t})).catch((function(t){throw e.htttService.handleError(t),t}))}},{key:"createTag",value:function(e){var t=this;return this.htttService.post(o.a.createTag,{alias:e.Alias,name:e.Name,description:e.Description}).then((function(e){var t=new n.a;return t.Id=e.tag.Id,t.Description=e.tag.Description,t.Name=e.tag.Name,t})).catch((function(r){throw t.htttService.handleError(r),e}))}},{key:"updateTag",value:function(e){var t=this;return this.htttService.post(o.a.updateTag,{alias:e.Alias,name:e.Name,description:e.Description,id:e.Id}).then((function(e){return e})).catch((function(e){t.htttService.handleError(e)}))}},{key:"deleteTag",value:function(e){var t=this;return this.htttService.post(o.a.deleteTag,{id:e}).then((function(e){return e})).catch((function(e){t.htttService.handleError(e)}))}},{key:"deleteTags",value:function(e){var t=this;return this.htttService.post(o.a.deleteTags,{tagIds:e}).then((function(e){return e})).catch((function(e){t.htttService.handleError(e)}))}},{key:"getRecords",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return this.htttService.get(o.a.getTags,{page:e-1,size:t,description:n}).then((function(e){if(!e)return null;var t={};return t.totalItemCount=+e.totalItemCount,t.totalPages=+e.totalPages,t.tags=[],e.items&&e.items.forEach((function(e){t.tags.push(e)})),t})).catch((function(e){throw r.htttService.handleError(e),e}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.lc(c.a),a.lc(s.a))},e.\u0275prov=a.Xb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},nAti:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=function e(){i(this,e),this.Description="",this.PriceList=[]}},r5y0:function(e,t,r){"use strict";r.d(t,"d",(function(){return c})),r.d(t,"c",(function(){return s})),r.d(t,"b",(function(){return h})),r.d(t,"a",(function(){return d}));var n=r("2pNN"),o=r("LQcV"),a=r("jXcA"),c=function e(){i(this,e),this.VATIncluded=!1,this.PercentDiscount=0,this.AmountDiscount=0,this.PurchaseItems=[],this.OrderDetails=[],this.CustomerInfo=new d,this.TotalAmount=0,this.TotalPaidAmount=0,this.OrderId=""},s=function(){function e(){i(this,e),this.ProductName="",this.OrderDetailId=0,this.OrderId="",this.OrderIndex=0,this.State=n.e.Waiting,this.ProductId=0,this.ProductImageUrl="",this.Quantity=1,this.Index=0,this.PurposeOf="",this.OriginalPrice=0,this.ModifiedPrice=0,this.AdditionalFee=0,this.MakingSortOrder=0,this.ShippingSortOrder=0,this.IsVATIncluded=!1,this.Description="",this.CustomerName="",this.CustomerPhoneNumber="",this.IsFromHardCodeProduct=!1,this.HardcodeImageName="",this.DeliveryInfo=new h,this.FloristInfo=new a.b,this.ShipperInfo=new a.d,this.SeenUsers=[],this.NoteImages=[]}return u(e,null,[{key:"DeepCopy",value:function(t){var r=new e;return r.DeliveryCompletedTime=t.DeliveryCompletedTime,r.MakingNote=t.MakingNote,r.MakingCompletedTime=t.MakingCompletedTime,r.MakingStartTime=t.MakingStartTime,r.ShippingSessionId=t.ShippingSessionId,r.MakingRequestTime=t.MakingRequestTime,r.ResultImageUrl=t.ResultImageUrl,r.DeliveryImageUrl=t.DeliveryImageUrl,r.CustomerName=t.CustomerName,r.CustomerPhoneNumber=t.CustomerPhoneNumber,r.IsVATIncluded=t.IsVATIncluded,r.ProductName=t.ProductName,r.OrderDetailId=t.OrderDetailId,r.State=t.State,r.ProductId=t.ProductId,r.ProductImageUrl=t.ProductImageUrl,r.Quantity=t.Quantity,r.Index=t.Index,r.DeliveryInfo=h.DeepCopy(t.DeliveryInfo),r.OriginalPrice=t.OriginalPrice,r.ModifiedPrice=t.ModifiedPrice,r.AdditionalFee=t.AdditionalFee,r.Description=t.Description,r.IsFromHardCodeProduct=t.IsFromHardCodeProduct,r.ShippingSortOrder=t.ShippingSortOrder,r.MakingSortOrder=t.MakingSortOrder,r.PurposeOf=t.PurposeOf,r.PercentDiscount=t.PercentDiscount,r.AmountDiscount=t.AmountDiscount,r.ShippingNote=t.ShippingNote,r.FixingFloristId=t.FixingFloristId,r.NoteImages=t.NoteImages,t.SeenUsers&&t.SeenUsers.length>0&&t.SeenUsers.forEach((function(e){r.SeenUsers.push(a.c.DeepCopy(e))})),t.FloristInfo&&(r.FloristInfo.Id=t.FloristInfo.Id,r.FloristInfo.AssignTime=t.FloristInfo.AssignTime,r.FloristInfo.CompletedTime=t.FloristInfo.CompletedTime,r.FloristInfo.FullName=t.FloristInfo.FullName),t.ShipperInfo&&(r.ShipperInfo.Id=t.ShipperInfo.Id,r.ShipperInfo.AssignTime=t.ShipperInfo.AssignTime,r.ShipperInfo.CompletedTime=t.ShipperInfo.CompletedTime,r.ShipperInfo.FullName=t.ShipperInfo.FullName),r}}]),e}(),h=function(){function e(){i(this,e),this.DateTime=new Date}return u(e,null,[{key:"DeepCopy",value:function(t){var r=new e;r.Address=t.Address,r.FullName=t.FullName,r.PhoneNumber=t.PhoneNumber;var n=t.DateTime.getTime();return r.DateTime=new Date(n),r}}]),e}(),d=function(){function e(){i(this,e),this.DiscountPercent=0,this.ScoreUsed=0,this.GainedScore=0,this.AvailableScore=0,this.ReceiverInfos=[],this.SpecialDays=[]}return u(e,null,[{key:"toViewModel",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r&&null!=r||(r=new e),r.Id=t.Id,r.Name=t.FullName,r.PhoneNumber=t.PhoneNumber,r.MembershipType=t.MembershipInfo.MembershipType,r.DiscountPercent=o.a.getMemberDiscountPercent(t.MembershipInfo.MembershipType),r.AvailableScore=t.MembershipInfo.AvailableScore,r.AccumulatedAmount=t.MembershipInfo.AccumulatedAmount,r.Address=t.Address.Home?t.Address.Home:t.Address.Work?t.Address.Work:"",r.CustomerScoreUsedTotal=t.MembershipInfo.UsedScoreTotal,Object.assign(r.ReceiverInfos,t.ReceiverInfos),Object.assign(r.SpecialDays,t.SpecialDays),r}}]),e}()},sWfF:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=function e(){i(this,e),this.IsDeleted=!1,this.Created=(new Date).getTime()}},t6I5:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=function e(){i(this,e)}},uP5C:function(t,n,o){"use strict";o.d(n,"a",(function(){return c})),o.d(n,"e",(function(){return s})),o.d(n,"d",(function(){return h})),o.d(n,"c",(function(){return d})),o.d(n,"b",(function(){return l}));var a=o("sWfF"),u=o("2pNN"),c=function(t){e(o,t);var n=r(o);function o(){var e;return i(this,o),(e=n.call(this)).Index=0,e.Sex=u.i.Male,e.ContactInfo=new d,e.Address=new l,e.MembershipInfo=new h,e.FullName="",e.PhoneNumber="",e.SpecialDays=[],e.ReceiverInfos=[],e.MainContactInfo=u.b.Zalo,e}return o}(a.a),s=function e(){i(this,e)},h=function e(){i(this,e),this.UsedScoreTotal=0,this.AvailableScore=0,this.AccumulatedAmount=0,this.MembershipType=u.c.NewCustomer},d=function e(){i(this,e),this.Zalo="",this.Viber="",this.Instagram="",this.Skype=""},l=function e(){i(this,e),this.Home="",this.Work=""}}}])}();